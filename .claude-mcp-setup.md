# Claude Code MCP Server Setup

## Current Status (Mac)
- MCP config at `~/.claude/mcp_config.json` has hardcoded API keys
- Config excluded from chezmoi management (in `.chezmoiignore`)
- Chezmoi source maintains placeholder values for git safety

## Fedora Setup (Manual - Run when Fedora is available)

```bash
# 1. Create MCP config with your actual API keys
cat > ~/.claude/mcp_config.json << 'EOF'
{
  "mcpServers": {
    "brave-search": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-brave-search"],
      "env": {
        "BRAVE_API_KEY": "YOUR_BRAVE_KEY_HERE"
      }
    },
    "exa": {
      "command": "npx",
      "args": ["-y", "exa-mcp-server"],
      "env": {
        "EXA_API_KEY": "YOUR_EXA_KEY_HERE"
      }
    },
    "context7": {
      "command": "npx",
      "args": ["-y", "context7-mcp-server"]
    }
  }
}
EOF

# 2. Edit with your actual keys from ~/.config/fish/secrets.fish
# Get keys: grep -E "BRAVE_API_KEY|EXA_API_KEY" ~/.config/fish/secrets.fish

# 3. Pull latest chezmoi changes
cd ~/.local/share/chezmoi && git pull

# 4. Verify MCP servers connect
claude mcp list
```

## Why Hardcoded Keys?

Claude Code has a known bug where environment variable expansion (`${VAR}`) in MCP configs doesn't work properly (GitHub issues #10955, #1254). The workaround is to hardcode keys in the config file.

## Security Notes

- `~/.claude/mcp_config.json` is excluded from chezmoi management
- Keys are only in the local file, not in git
- Each machine needs manual setup with hardcoded keys
