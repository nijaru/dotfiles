prompt = """
Generate a pull request for the current branch.

Target branch: $ARGUMENTS (default: main)

---

## Steps

### 1. Gather Context

!{ git branch --show-current }
!{ git log main..HEAD --oneline }
!{ git diff main...HEAD --stat }
!{ git diff main...HEAD }

### 2. Run Code Review

If not already done, perform a code review on the changes.

### 3. Find Related Issues

Check commit messages and branch name for issue references:
!{ git log main..HEAD --format="%B" | grep -oE '#[0-9]+' }
!{ git branch --show-current | grep -oE '[0-9]+' }

### 4. Suggest Reviewers

Find who owns the changed files:
!{ git diff main...HEAD --name-only | head -5 | xargs -I{} git log -1 --format="%an" -- {} }

### 5. Check CI Status

!{ gh run list --branch $(git branch --show-current) --limit 3 }

### 6. Generate PR Content

```markdown
## Summary

[1-3 bullet points on WHY these changes, not WHAT changed]

Fixes #XXX <!-- if applicable -->

## Changes

**Added**
- ...

**Changed**
- ...

**Fixed**
- ...

**Removed**
- ...

## Testing

- [ ] Unit tests pass
- [ ] Manual testing: [describe what was tested]
- [ ] Edge cases considered: [list any]

## Breaking Changes

[If any - describe migration steps]

<!-- None -->

## Checklist

- [ ] Code review passing (no ERROR/WARN issues)
- [ ] Tests added/updated
- [ ] Documentation updated (if needed)
```

### 7. Present and Confirm

Show the draft to the user, then ask:

**"Create this PR? (yes/no)"**

If yes:
!{ gh pr create --title "..." --body "..." [--reviewer ...] }

**Do NOT run `gh pr create` without explicit user approval.**
"""
description = "Generate PR description - asks permission before creating"
