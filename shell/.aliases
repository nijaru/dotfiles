#!/usr/bin/env zsh

# Source git aliases
z4h source ~/.aliases-git

###############################################################################
# Modern CLI Replacements
###############################################################################

# File Operations & Viewing
# ------------------------
command_exists bat && \
    alias cat="bat --plain --paging=never"                # Enhanced file viewing

# Enhanced ls with eza
if command_exists eza; then
    alias ls="eza --icons --git"                         # Basic listing
    alias l="eza -l --icons --git"                       # Long listing
    alias ll="eza -l --icons --git"                      # Detailed listing
    alias la="eza -a --icons --git"                      # Show hidden files
    alias lla="eza -la --icons --git"                    # Long with hidden
    alias lt="eza -T --icons --git"                      # Tree listing
    alias tree="eza --tree --icons"                      # Tree view
fi

# Search and Navigation
# --------------------
command_exists rg && alias grep="rg"                      # Better text search
command_exists fd && alias find="fd"                      # Better file search
command_exists fzf && \
    alias preview="fzf --preview 'bat --color=always {}'" # Interactive preview

# System Monitoring
# ----------------
command_exists duf && alias df="duf"                      # Better disk usage
command_exists dust && alias du="dust"                    # Better dir usage
command_exists procs && alias ps="procs"                  # Better process view
command_exists btop && alias top="btop"                   # Better system monitor
command_exists htop && alias htop="htop --tree"           # Tree process view

# File Comparison & Network
# ------------------------
command_exists delta && alias diff="delta"                # Better diff tool
command_exists doggo && alias dig="doggo"                 # Better DNS lookup
command_exists gping && alias ping="gping"                # Visual ping tool

###############################################################################
# Safe File Operations
###############################################################################

# Core Operations
alias rm="rm -I --preserve-root"                          # Safe removal
alias cp="cp -ia"                                         # Safe copy
alias mv="mv -i"                                          # Safe move
alias mkdir="mkdir -pv"                                   # Recursive mkdir

# Advanced Operations
alias cpv="rsync -ah --info=progress2"                   # Copy with progress
alias mvv="rsync -ah --remove-source-files --info=progress2" # Move with progress
alias symlink="ln -sf"                                   # Force symlink

###############################################################################
# Directory Navigation
###############################################################################

# Quick Traversal
alias ..="cd .."                                         # Up one level
alias ...="cd ../.."                                     # Up two levels
alias ....="cd ../../.."                                 # Up three levels
alias -- -="cd -"                                        # Previous directory
alias d='dirs -v'                                        # Directory stack

# Common Directories
alias dl="cd ~/Downloads"                                # Go to Downloads
alias doc="cd ~/Documents"                               # Go to Documents
alias dt="cd ~/Desktop"                                  # Go to Desktop
alias p="cd ~/Projects"                                  # Go to Projects
alias ghub="cd ~/github"                                 # Go to GitHub

###############################################################################
# Python Development
###############################################################################
if command_exists python3; then
    alias py="python3"                                   # Python shorthand
    alias python="python3"                               # Force Python 3
    alias pip="python3 -m pip"                          # Safe pip usage
    alias pipu="pip list --outdated --format=freeze | \
        grep -v '^\-e' | cut -d = -f 1 | xargs -n1 pip install -U" # Update all packages
    alias pipd="pip install -e ."                       # Dev installation
    alias pytest="python -m pytest"                      # Run tests
    alias pypath="python -c 'import sys; print(\"\n\".join(sys.path))'" # Show Python path
fi

###############################################################################
# Go Development
###############################################################################
if command_exists go; then
    # Build and Run
    alias gor="go run ."                                # Run package
    alias gob="go build"                                # Build package
    alias goi="go install"                              # Install package

    # Testing
    alias got="go test ./..."                          # Test all packages
    alias gotv="go test -v ./..."                      # Verbose testing
    alias gotc="go test -cover ./..."                  # Test coverage

    # Dependencies
    alias gom="go mod"                                 # Mod shorthand
    alias gomt="go mod tidy"                           # Tidy modules
    alias gomv="go mod verify"                         # Verify deps
    alias gomu="go get -u ./..."                       # Update deps

    # Tools
    alias gof="go fmt ./..."                          # Format code
    alias gov="go vet ./..."                          # Vet code
    alias gol="golangci-lint run"                     # Lint code
fi

###############################################################################
# Docker Compose Operations
###############################################################################
alias dc="docker compose"                    # Basic compose command
alias dcu="docker compose up -d"            # Start containers in background
alias dcd="docker compose down"             # Stop and remove containers
alias dcl="docker compose logs -f"          # Follow container logs
alias dcp="docker compose pull"             # Pull latest images
alias dcr="docker compose restart"          # Restart containers
alias dcs="docker compose stop"             # Stop containers
alias dcps="docker compose ps"              # List containers
alias dcb="docker compose build"            # Build containers
alias dce="docker compose exec"             # Execute command in container
alias dccp="docker compose cp"              # Copy files between host and containers

# Development helpers
alias dcdev="docker compose -f docker-compose.yml -f docker-compose.dev.yml"
alias dcprod="docker compose -f docker-compose.yml -f docker-compose.prod.yml"

# Cleanup commands
alias dcrm="docker compose rm -f"           # Remove stopped containers
alias dcprune="docker compose down --volumes --remove-orphans"  # Full cleanup
